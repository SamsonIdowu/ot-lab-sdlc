pipeline {
    agent any

    stages {
        stage('Clean Up') {
            steps {
                // Delete previously running instances of the container
                sh "docker rm otlab3-app || true"
            }
        }
        stage('Deploy App') {
            steps {
                // Pull and run the image as a container on the jenkins agent
                sh '''
                docker pull samsonidowu/otlab3-app"
                docker run -d samsonidowu/otlab3-app --name otlab3-app
                '''
            }
        }
    }
}